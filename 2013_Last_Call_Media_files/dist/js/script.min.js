!function(t,e){"use strict";e.behaviors.dialog.prepareDialogButtons=function(e){var o=[],i=e.find(".form-actions input[type=submit], a.dialog-button");return i.each(function(){var e=t(this).css({width:0,height:0,padding:0,border:0});o.push({text:e.html()||e.attr("value"),class:e.attr("class"),click:function(t){e.trigger("mousedown").trigger("click").trigger("mouseup"),t.preventDefault()}})}),o},t(window).on("dialog:beforecreate",function(e,o,i,a){t(window).data("scrollroadTracks").ignore=!0}),t(window).on("dialogclose",function(e,o,i,a){t(window).data("scrollroadTracks").ignore=!1})}(jQuery,Drupal),function(t,e){"use strict";var o={self:this,init:function(){var e=this.checkMobileWebkit();e&&t(window).width()>740?(this.addIScroll(),t("#bg-background, #bg-foreground, #bg-tracks, #bg-train").css("position","absolute")):t("main").addClass("no-iscroll"),this.setStellarRatio(),this.setAverageStellarRatio(),this.initParallax(),this.overrideStellar()},addIScroll:function(){t("main").once("iscroll").each(function(){function o(t){t.target.nodeName.toUpperCase().match(/^(INPUT|TEXTAREA|BUTTON|SELECT|X-WIDGET)/)||t.preventDefault()}t(".pane").find(".region").each(function(){var e=t(this);e.height(e[0].scrollHeight).css("minHeight","100%")}),new e("pane-work",{vScroll:!0,hScroll:!1,onBeforeScrollStart:o,handleClick:!1}),new e("pane-about",{vScroll:!0,hScroll:!1,onBeforeScrollStart:o,handleClick:!1}),new e("pane-blog",{vScroll:!0,hScroll:!1,onBeforeScrollStart:o,handleClick:!1}),new e("pane-contact",{vScroll:!0,hScroll:!1,onBeforeScrollStart:o,handleClick:!1});var i=location.hash;location.hash="",Drupal.iScroll=new e("scroll-wrapper",{onBeforeScrollStart:o,bounce:!1}),i&&setTimeout(function(){location.hash=i,Drupal.iScroll.scrollToElement(i,0)},50)})},overrideStellar:function(){if("undefined"!==window.Stellar){var e=this,o=window.Stellar.prototype.refresh;window.Stellar.prototype.refresh=function(t){e.setStellarRatio(),e.setAverageStellarRatio(),o.call(this,t)};var i=window.Stellar.prototype._repositionElements;window.Stellar.prototype._repositionElements=function(){i.call(this)},window.Stellar.prototype._findParticles=function(){var e=this;if(t.isArray(this.particles))for(var o=this.particles.length-1;o>=0;o--)this.particles[o].$element.data("stellar-elementIsActive",!1);this.particles=[],this.options.parallaxElements&&this.$element.find("[data-use-stellar]").each(function(o){var i,a,n,s,r,l,c,d,f,h=t(this),u=0,p=0,w=0,v=0;if(h.data("stellar-elementIsActive")){if(h.data("stellar-elementIsActive")!==this)return}else h.data("stellar-elementIsActive",this);e.options.showElement(h),h.data("stellar-startingLeft")?(h.css("left",h.data("stellar-startingLeft")),h.css("top",h.data("stellar-startingTop"))):(h.data("stellar-startingLeft",h.css("left")),h.data("stellar-startingTop",h.css("top"))),n=h.position().left,s=h.position().top,r="auto"===h.css("margin-left")?0:parseInt(h.css("margin-left"),10),l="auto"===h.css("margin-top")?0:parseInt(h.css("margin-top"),10),d=h.offset().left-r,f=h.offset().top-l,h.parents().each(function(){var e=t(this);return e.data("stellar-offset-parent")===!0?(u=w,p=v,c=e,!1):(w+=e.position().left,void(v+=e.position().top))}),i=void 0!==h.data("stellar-horizontal-offset")?h.data("stellar-horizontal-offset"):void 0!==c&&void 0!==c.data("stellar-horizontal-offset")?c.data("stellar-horizontal-offset"):e.horizontalOffset,a=void 0!==h.data("stellar-vertical-offset")?h.data("stellar-vertical-offset"):void 0!==c&&void 0!==c.data("stellar-vertical-offset")?c.data("stellar-vertical-offset"):e.verticalOffset,e.particles.push({$element:h,$offsetParent:c,isFixed:"fixed"===h.css("position"),horizontalOffset:i,verticalOffset:a,startingPositionLeft:n,startingPositionTop:s,startingOffsetLeft:d,startingOffsetTop:f,parentOffsetLeft:u,parentOffsetTop:p,stellarRatio:void 0!==h.data("stellar-ratio")?h.data("stellar-ratio"):1,width:h.outerWidth(!0),height:h.outerHeight(!0),isHidden:!1})})}}},initParallax:function(){this.checkMobileWebkit()?t("main").stellar({scrollProperty:"transform",positionProperty:"transform",responsive:!1,verticalScrolling:!1,hideDistantElements:!1}):t.stellar({scrollProperty:"scroll",positionProperty:"transform",responsive:!0,verticalScrolling:!1,hideDistantElements:!1})},setStellarRatio:function(){t("[data-use-stellar]").not("[data-avg-ratio-updates]").each(function(){var e=t(this).width(),o=t("#bg-container").width(),i=t(window).width(),a=void 0!==t(this).data("stellar-ratio-fixed")?t(this).data("stellar-ratio-fixed"):(e-i)/(o-i);t(this).data("stellar-ratio",a),t(this).attr("data-stellar-ratio",a)})},setAverageStellarRatio:function(){var e=t("[data-use-stellar]").not("[data-avg-ratio-updates], [data-stellar-ratio-fixed]"),o=e.length,i=0,a=0;e.each(function(){var e=t(this);i+=e.data("stellar-ratio"),a+=e.width()}),t("[data-use-stellar][data-avg-ratio-updates]").data("stellar-ratio",i/o).width(a/o)},checkMobileWebkit:function(){var t=navigator.userAgent,e=/WebKit/.test(t)&&/Mobile/.test(t);return e}};Drupal.behaviors.lastCallParallax={attach:function(e){t("main").once("parallax").each(function(){o.init()})}}}(jQuery,window.iScroll),function(t){"use strict";t.fn.scrollControl=function(e){var o={paneSelector:".region"},i={options:t.extend({},o,e),panes:[],windowPos:{},preventFocusSet:!1,processed:!1,focused:"",$focusedElement:"",init:function(){this.getPanes(this.options.paneSelector),t(window).data("scroll-control",this),this.refresh()},getPanes:function(e){var o=this;t(e).each(function(){o.panes.push(this),t(this).attr("data-sc-pane",!0)})},getOffsets:function(e){var o=t(e),i=o.width(),a=o.offset().left,n=Math.round(a+i/2),s=a+i,r=o.offset().top,l=r+o.height();return o.data("offset-left",a).data("offset-center",n).data("offset-right",s).data("offset-top",r).data("offset-bottom",l),e},refresh:function(){var e=this,o=this.windowPos.center,i=this.windowPos.middle,a=this.windowPos.top,n=this.getWindowPosition(),s=n.center,r=n.middle,l=n.top,c=0;t(this.panes).each(function(){var n=t(e.getOffsets(this)),d=n.data("offset-center"),f=n.data("offset-top"),h=n.data("offset-bottom");t(window).data("scroll-control-desktop")===!0?(o<d&&s>=d||o>d&&s<=d)&&!e.preventFocusSet&&e.processed&&e._windowTrigger("scrollcontrol.focusSet",[this]):i>=h&&r<=h||i<=f&&r>=f?e._windowTrigger("scrollcontrol.focusSet",[this]):l<=0?e._windowTrigger("scrollcontrol.focusSet",[e.panes[0]]):a<=h&&l>=h&&0===c&&e._windowTrigger("scrollcontrol.focusSet",[e.panes[1]]),c++,e.processed||(e.processed=!0)})},getWindowDimensions:function(){var e=t(window);t.extend(this.windowPos,{width:e.width(),height:e.height()})},getWindowPosition:function(){this.windowPos.height||this.getWindowDimensions();var e=t(window),o=this.windowPos.width,i=e.scrollLeft(),a=e.scrollTop(),n=this.windowPos.height,s={left:i,right:i+o,center:Math.round(i+o/2),top:a,bottom:a+n,middle:Math.round(a+n/2)};return t.extend(this.windowPos,s),s},isScrolledIntoView:function(e){var o=t(e),i=o.data("offset-top"),a=i+o.height(),n=o.data("offset-left"),s=o.data("offset-right");return!(this.windowPos.left>=n&&this.windowPos.left>=s||this.windowPos.right<=n&&this.windowPos.right<=s||this.windowPos.top>=i&&this.windowPos.top>=a||this.windowPos.bottom<=i&&this.windowPos.bottom<=a)},updateMQStatus:function(){window.matchMedia("all and (min-width: 721px)").matches?t(window).data("scroll-control-desktop",!0):t(window).data("scroll-control-desktop",!1)},_windowTrigger:function(e,o){1===arguments.length?t(window).trigger(e):2===arguments.length&&t(window).trigger(e,o)}};i.init(),t(window).on("scroll",function(t){i.refresh()}),t(window).on("resize",function(){i.getWindowDimensions()}),t(window).on("scrollcontrol.focusSet",function(e,o){var a=t(o).data("sc-element");i.focused=a,i.$focusedElement=t(o)}),t(window).on("resize.scrollControl",function(){i.updateMQStatus(),t(".pane").each(function(){var e=t(this);e.data("centerscroll",Math.round(e.offset().left+e.width()/2))})}).trigger("resize.scrollControl")}}(jQuery),function(t){"use strict";t.fn.scrollRoadTracks=function(){var e={$scrollLocker:!1,preventScrollThrough:!1,ignore:!1,lastDelta:0,lockReleased:!1,scrollControl:t(window).data("scroll-control"),setLastDelta:function(t,e){return this.lastDelta=t,this.lastDelta},controlledScroll:function(e){if(this.setLastDelta(e),this.$scrollLocker!==!1)if(this.scrollLockerAtEnd(e))this.lockReleased?this.$scrollLocker=!1:this.preventScrollThrough=!0;else{this.lockReleased=!1;var o=this.$scrollLocker.scrollTop();this.$scrollLocker.scrollTop(Math.round(o-e/4))}else t(window).scrollLeft(t(window).scrollLeft()-e)},scrollLockerAtEnd:function(t,e){if(this.$scrollLocker){var o=this.$scrollLocker.scrollTop(),i=this.$scrollLocker.innerHeight(),a=this.$scrollLocker[0].scrollHeight;return i>=a||(this.movingForward(t)?!(o+i<a-1||this.$scrollLocker.hasClass("region-contact")):o<=0)}},releaseLock:function(){this.preventScrollThrough=!1,this.lockReleased=!0},getScrollDistance:function(t,e,o){var i=Math.abs(e)>Math.abs(o)?-e:o;return t*i},movingForward:function(t){return t<=0}};t(window).data("scrollroadTracks",e),t(window).on("scrollcontrol.focusSet",function(o,i){e.$scrollLocker=t(i)});var o=0;return t(window).on("mousewheel",function(i,a,n,s){if(t(this).data("scroll-control-desktop")===!0&&e.ignore!==!0){i.preventDefault();var r=e.getScrollDistance(i.deltaFactor,n,s),l=t(window),c=Math.round(l.scrollLeft()+l.width()/2);t(".pane").filter(function(){return r<0?t(this).data("centerscroll")>c:t(this).data("centerscroll")<c}).each(function(){r<0?c-r>t(this).data("centerscroll")&&!e.$scrollLocker&&(r=c-t(this).data("centerscroll")):c-r<t(this).data("centerscroll")&&(r=c-t(this).data("centerscroll"))}),e.preventScrollThrough===!0&&Math.abs(r)>Math.abs(o)&&e.releaseLock(),e.preventScrollThrough!==!0&&e.controlledScroll(r),o=r}}),this}}(jQuery),function(t){"use strict";function e(t){this.$el=t.$el,this.baseClass=t.$el.data("animation-class"),this.finish=t.finish,this.start=t.start,this.stepClass="",this.steps=t.$el.data("animation-steps")}e.prototype.setSprite=function(){var o=this.start,i=this.finish,a=t(document).scrollLeft()/e.timeline*100;if(o<=a&&a<=i){var n=a-o,s=i-o,r=Math.round(n/s*this.steps);r+=r<1?1:0,this.setAnimationStep(r)}else this.setAnimationStep(0)},e.prototype.setAnimationStep=function(t){var e=parseInt(t,10),o=e>9?e:"0"+e;this.$el.removeClass(this.stepClass),this.stepClass=this.baseClass+o,this.$el.addClass(this.stepClass);var i=o<1||this.steps<o;this.$el.toggleClass("animation-hidden",i)},Drupal.behaviors.lastcallAnimations={attach:function(){var o=[new e({$el:t("#allaboard-animation"),start:0,finish:9.5}),new e({$el:t("#bird-animation"),start:2.6,finish:25}),new e({$el:t("#dog-animation"),start:18,finish:28.7}),new e({$el:t("#surfing-animation"),start:31.43,finish:69.98}),new e({$el:t("#jump-animation"),start:38.09,finish:60.5}),new e({$el:t("#wave-animation"),start:68.6,finish:91.8}),new e({$el:t("#robot-animation"),start:90.29,finish:100})],i=function(i){e.timeline=t(document).width()-t(window).width(),o.map(function(t){t.setSprite()})};i(),t(document).on("scroll",i)}}}(jQuery),function(t,e){"use strict";Drupal.behaviors.lastcallFrontpage={attach:function(e,o){function i(e,o){var i=t(e).find("a").parent(),a=t(e).find("a");if(i.length){var n={};"#pane-home"!==a.attr("href")?(n.width=i.width(),n.left=i.position().left+parseInt(i.css("padding-left"),10),t(".scroll.scroll-active").removeClass("scroll-active"),a.addClass("scroll-active")):(t(".scroll.scroll-active").removeClass("scroll-active"),n.width=35,n.left=i.position().left+parseInt(i.css("padding-left"),10)+50),t(this).stop(!0,!1),o?t(this).animate(n):t(this).css(n)}}if(t("body.path-frontpage").length){var a;if(t(".pane").each(function(){a=t(this).attr("id"),a&&a.length>0&&t(this).children(".region:first-child").data("sc-element",a)}),t("html").once("scroll-control").each(function(){t(window).scrollControl(),t(window).scrollRoadTracks()}),!t("#active-indicator").length){var n=t('<span id="active-indicator"></span>');t("#page-header").append(n)}t(window,e).on("scrollcontrol.focusSet",function(e,o){var a=t("#active-indicator"),n=t(o).parent().attr("id"),s=t('header ul.desktop-menu li a[href="#'+n+'"]').parent(),r=t('header ul.mobile-menu li a[href="#'+n+'"]').parent().text();"Home"===r&&(r=""),t("#title").text(r),a.data("active-item",s),i.apply(a,[s,!0])}),t("#page-header .menu a",e).hover(function(){var e=t("#active-indicator"),o=t(this).parent();i.apply(e,[o,!0])},function(){var e=t("#active-indicator");i.apply(e,[e.data("active-item"),!0])}),t("a.scroll",e).on("click",function(e){e.preventDefault();var o=t(this),i=t(window).data("scrollroadTracks").$scrollLocker,a=i?i.parent().attr("id"):"none",n=t(o.attr("href"));if(a!==n.attr("id")){var s,r;if(n.offset().left<t(window).scrollLeft()?(s="forward",r="behind"):(s="behind",r="forward"),t("#bg-train").addClass("train-dislodged-"+s).removeClass("train-dislodged-"+r),Drupal.iScroll)Drupal.iScroll.scrollToElement(o.attr("href"),2500);else{var l=window.matchMedia("all and (min-width: 721px)").matches?"x":"y",c=t(window).data("scroll-control"),d=2500,f={axis:l,onAfter:function(e){var o=t(window).data("scrollroadTracks");o.$scrollLocker=t(e.find(".region")),c.preventFocusSet=!1,t("#bg-train").removeClass("train-dislodged-"+s).addClass("train-dislodged-"+r).removeClass("train-dislodged-"+s)}};"y"===l&&(d=1e3),c._windowTrigger("scrollcontrol.focusSet",t(t(o.attr("href")).find(".region"))),c.preventFocusSet=!0,t(window).scrollTo(o.attr("href"),d,f)}}}),t(window).off("resize.lastcall.activeIndicator").on("resize.lastcall.activeIndicator",function(e){t("#active-indicator").each(function(){var e=t(this).data("active-item");e&&i.apply(this,[e,!1])})})}}},Drupal.behaviors.slotLinkStyle={attach:function(e,o){t(".more-link",e).wrap(t("<div>",{class:"slot-links-container"})).add(".field--name-field-site-url",e).each(function(){var e=t(this).find("a"),o=e.text();e.text(null),e.append(t("<span>",{class:"slot-link--normal",text:o})),e.append(t("<span>",{class:"slot-link--hover",text:o}))})}},Drupal.behaviors.fancySelects={attach:function(e){var o=t("#ajax-contact-form-wrapper select",e);o.find("option:first-child").addClass("label"),o.easyDropDown()}},Drupal.behaviors.pagerManipulate={attach:function(e){t(".pager__item--previous a[href]",e).length&&t(".pager__item--last",e).css("display","none"),t(".pager__item--next a",e).length&&t(".pager__item--first",e).css("display","none")}},Drupal.behaviors.viewsExposedFormSelectAsTab={attach:function(e,o){t(".select-as-tabs",e).hide().each(function(){var e=t(this),o=t("<ul />").addClass("views-exposed-filter-tabs-processed");e.find("option").each(function(i){var a=t(this),n=t("<li />"),s=null!=t(this).attr("selected")?" active":"";n.addClass("tab tab-"+i+s).html(a.html()).click(function(){e.val(a.val()),e.closest("form").find("input[type=submit]").click()}),o.append(n)}).parents(".form--inline").append(o)})}},Drupal.behaviors.portfolioSlideshow={attach:function(o,i){var a=t(".node--view-mode-full .field--name-field-site-screenshots",o),n=t(".node--view-mode-full .field--name-field-cover-image",o);(a.length||n.length)&&(a.on("cycle-bootstrap",function(e,o,i){i.customGetImageSrc=function(e,o,i){return t(i).find("img").attr("src")}}),a.prepend(n),a.append('<div class="cycle-pager"></div>'),a.cycle({log:!1,fx:e.touch?"scrollHorz":"fade",speed:600,slides:">.field__item",pagerTemplate:'<img src="{{API.customGetImageSrc}}" width=135 height=100>',delay:1e3,swipe:!0,maxZ:9,pagerEvent:"mouseover"}),a.after('<div class="swipe-indicator"><i class="icon-left"></i>Swipe<i class="icon-right"></i></div>'))}},Drupal.behaviors.responsiveMenu={attach:function(e,o){var i=!1;t("#navigation",e).find(".menu-title").on("click",function(e){e.preventDefault(),i?t(this).toggleClass("show-menu"):(t(this).addClass("show-menu"),i=!0)}).on("focus",function(e){i||(t(this).addClass("show-menu"),i=!1)}).end().find(".mobile-menu a").on("click",function(){t("#navigation",e).find(".menu-title").removeClass("show-menu")}).on("focus",function(){t("#navigation",e).find(".menu-title").addClass("show-menu")}),t(document).on("click focus keyup",function(o){t(o.target).parents("#navigation").length||(t("#navigation",e).find(".menu-title").removeClass("show-menu"),i=!1)})}},Drupal.behaviors.lcmOverridePrototypes={attach:function(){Drupal.AjaxCommands.prototype.viewsScrollTop=function(t,e){}}},Drupal.behaviors.chromeTelLinks={attach:function(e){navigator.userAgent.match(/(iPhone|iPod|iPad)/)&&t("span.tel",e).telEnhance()}},Drupal.behaviors.stickyPager={attach:function(e){function o(){var e=a.$focusedElement.find("div.item-list:visible"),o=e.siblings(".view-content");if(e.length>0){var s=t(window).scrollTop()-(o.offset().top+o.height())+n,r=s>0,l=t(window).scrollTop()-e.offset().top+n,c=l>0,d=e.find("ul");c&&!r&&e.data("fixed")!==!0?(e.addClass("fixed-pager"),e.data("fixed",!0)):c||e.data("fixed")!==!0?r&&e.data("fixed")===!0&&i(e,d):i(e,d)}}function i(t,e){t.data("fixed",!1),e.animate({marginTop:"-40"},300,function(){e.css("margin-top",""),t.removeClass("fixed-pager")})}var a=t(window).data("scroll-control");if(a){var n=t("#page-header").height();""!==a.focused&&o(),t(window).on("scroll",function(e){t(window).data("scroll-control-desktop")||o()})}}},Drupal.behaviors.joinUsLink={attach:function(e,o){t("#block-views-block-employees-staff-block .views-row:last",e).css("cursor","pointer").click(function(){t.cookie("backPath","about"),window.location.href="careers"})}},t.fn.telEnhance=function(e){t(this).each(function(){var e=t(this);if(0===e.find('a[href^="tel:"]').length){var o=e.text().replace(/[()-]/g,""),i=t("<a>"+e.html()+"</a>").attr("href","tel://"+o);e.html(i)}})},Drupal.behaviors.lcmAnimations={attach:function(e,o){t("#robot-animation").on("click",function(){t("#contact-message-feedback-form").find('textarea[name="message"]').focus()})}}}(jQuery,Modernizr);